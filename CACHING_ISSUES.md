# –ü—Ä–æ–±–ª–µ–º—ã —Å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º –æ–±—ä–µ–∫—Ç–æ–≤

## üî¥ –ü–†–û–ë–õ–ï–ú–ê: –£–¥–∞–ª–µ–Ω–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã –æ—Å—Ç–∞—é—Ç—Å—è –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏

### –ü—Ä–∏—á–∏–Ω–∞ –ø—Ä–æ–±–ª–µ–º—ã

–û–±—ä–µ–∫—Ç—ã —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –ª–æ–∫–∞–ª—å–Ω–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏ (`useState`) –∫–∞–∂–¥–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –∏ –Ω–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É—é—Ç—Å—è –º–µ–∂–¥—É —ç–∫—Ä–∞–Ω–∞–º–∏.

## üìç –ü—Ä–æ–±–ª–µ–º–Ω—ã–µ –º–µ—Å—Ç–∞

### 1. **HomeScreen.tsx** (–°–¢–†–û–ö–ò 49-50, 63-75, 86-91)
```typescript
const [objects, setObjects] = useState<InspectionObject[]>([]);
const [filteredObjects, setFilteredObjects] = useState<InspectionObject[]>([]);

// –ó–∞–≥—Ä—É–∂–∞–µ—Ç –æ–±—ä–µ–∫—Ç—ã —Ç–æ–ª—å–∫–æ –ø—Ä–∏ —Ñ–æ–∫—É—Å–µ —ç–∫—Ä–∞–Ω–∞
useFocusEffect(
  useCallback(() => {
    loadObjects();  // ‚ö†Ô∏è –ó–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –≤–æ–∑–≤—Ä–∞—Ç–µ –Ω–∞ —ç–∫—Ä–∞–Ω
    loadStats();
  }, [])
);
```

**–ü—Ä–æ–±–ª–µ–º–∞:** 
- –ï—Å–ª–∏ –æ–±—ä–µ–∫—Ç —É–¥–∞–ª–µ–Ω –Ω–∞ –¥—Ä—É–≥–æ–º —ç–∫—Ä–∞–Ω–µ, HomeScreen –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –µ–≥–æ –≤ –∫–∞—Ä—Ç–µ
- –î–∞–Ω–Ω—ã–µ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –≤–æ–∑–≤—Ä–∞—Ç–µ –Ω–∞ HomeScreen
- –ù–µ—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —Å –¥—Ä—É–≥–∏–º–∏ —ç–∫—Ä–∞–Ω–∞–º–∏

### 2. **ObjectsListScreen.tsx** (–°–¢–†–û–ö–ò 23-24, 40-44)
```typescript
const [objects, setObjects] = useState<InspectionObject[]>([]);
const [filteredObjects, setFilteredObjects] = useState<InspectionObject[]>([]);

useFocusEffect(
  useCallback(() => {
    loadObjects();  // ‚ö†Ô∏è –ó–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ —Ñ–æ–∫—É—Å–µ
  }, [])
);
```

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –ü–æ—Å–ª–µ —É–¥–∞–ª–µ–Ω–∏—è –æ–±—ä–µ–∫—Ç–∞ –Ω–∞ —ç—Ç–æ–º —ç–∫—Ä–∞–Ω–µ, –¥–∞–Ω–Ω—ã–µ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è
- –ù–æ –µ—Å–ª–∏ —É–¥–∞–ª–µ–Ω–∏–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –Ω–∞ –¥—Ä—É–≥–æ–º —ç–∫—Ä–∞–Ω–µ, —ç—Ç–æ—Ç —ç–∫—Ä–∞–Ω –Ω–µ –∑–Ω–∞–µ—Ç –æ–± –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö

### 3. **ObjectsScreen.tsx** (–°–¢–†–û–ö–ò 27-28, 47-51, 130-131)
```typescript
const [objects, setObjects] = useState<InspectionObject[]>([]);
const [filteredObjects, setFilteredObjects] = useState<InspectionObject[]>([]);

// ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ –æ–±–Ω–æ–≤–ª—è–µ—Ç –ø–æ—Å–ª–µ —É–¥–∞–ª–µ–Ω–∏—è
await ObjectService.deleteObject(object.id);
await loadObjects();  // ‚úÖ –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ
```

**–•–æ—Ä–æ—à–æ:** –ü–æ—Å–ª–µ —É–¥–∞–ª–µ–Ω–∏—è –≤—ã–∑—ã–≤–∞–µ—Ç `loadObjects()`, –Ω–æ —Ç–æ–ª—å–∫–æ –¥–ª—è —ç—Ç–æ–≥–æ —ç–∫—Ä–∞–Ω–∞

### 4. **ReportScreen.tsx** –∏ **CreateInspectionScreen.tsx** (–°–¢–†–û–ö–ò 45-46)
```typescript
const loadObject = async () => {
  const objects = await DataService.getObjects();  // ‚ö†Ô∏è –ó–∞–≥—Ä—É–∂–∞–µ—Ç –≤—Å–µ –æ–±—ä–µ–∫—Ç—ã
  const foundObject = objects.find(obj => obj.id === objectId);
  setObject(foundObject || null);
};
```

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –ó–∞–≥—Ä—É–∂–∞–µ—Ç –≤—Å–µ –æ–±—ä–µ–∫—Ç—ã —Ç–æ–ª—å–∫–æ –¥–ª—è –ø–æ–∏—Å–∫–∞ –æ–¥–Ω–æ–≥–æ
- –ï—Å–ª–∏ –æ–±—ä–µ–∫—Ç —É–¥–∞–ª–µ–Ω, –º–æ–∂–µ—Ç –ø–æ–∫–∞–∑–∞—Ç—å `null`, –Ω–æ –Ω–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç –¥—Ä—É–≥–∏–µ —ç–∫—Ä–∞–Ω—ã

## üîß –†–µ—à–µ–Ω–∏—è

### –†–µ—à–µ–Ω–∏–µ 1: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Navigation Events (–ë—ã—Å—Ç—Ä–æ–µ —Ä–µ—à–µ–Ω–∏–µ)

–î–æ–±–∞–≤–∏—Ç—å listener –Ω–∞ —Å–æ–±—ã—Ç–∏—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö:

```typescript
// –í HomeScreen.tsx
import { useNavigation, useFocusEffect } from '@react-navigation/native';

useEffect(() => {
  const unsubscribe = navigation.addListener('focus', () => {
    loadObjects();  // –û–±–Ω–æ–≤–ª—è—Ç—å –ø—Ä–∏ –∫–∞–∂–¥–æ–º —Ñ–æ–∫—É—Å–µ
  });
  return unsubscribe;
}, [navigation]);
```

### –†–µ—à–µ–Ω–∏–µ 2: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Context –¥–ª—è –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è (–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

–°–æ–∑–¥–∞—Ç—å `ObjectsContext` –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –æ–±—ä–µ–∫—Ç–æ–≤ –≥–ª–æ–±–∞–ª—å–Ω–æ:

```typescript
// contexts/ObjectsContext.tsx
const ObjectsContext = createContext<{
  objects: InspectionObject[];
  refreshObjects: () => Promise<void>;
}>({ objects: [], refreshObjects: async () => {} });

// –ü—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –æ–±—ä–µ–∫—Ç–∞ - –æ–±–Ω–æ–≤–ª—è—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç
// –í—Å–µ —ç–∫—Ä–∞–Ω—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–ª—É—á–∞—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
```

### –†–µ—à–µ–Ω–∏–µ 3: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å React Query –∏–ª–∏ SWR (–õ—É—á—à–µ–µ —Ä–µ—à–µ–Ω–∏–µ)

–î–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –∏ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è:

```typescript
import { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';

// –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç –≤—Å–µ —ç–∫—Ä–∞–Ω—ã –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö
const { data: objects } = useQuery(['objects'], () => DataService.getObjects());

const deleteMutation = useMutation({
  mutationFn: (id: string) => ObjectService.deleteObject(id),
  onSuccess: () => {
    queryClient.invalidateQueries(['objects']); // –û–±–Ω–æ–≤–ª—è–µ—Ç –≤—Å–µ —ç–∫—Ä–∞–Ω—ã
  },
});
```

## üéØ –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–æ–µ —Ä–µ—à–µ–Ω–∏–µ

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Navigation Events + –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∑–∞–≥—Ä—É–∑–∫—É:**

1. –û–±–Ω–æ–≤–ª—è—Ç—å –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏ –∫–∞–∂–¥–æ–º —Ñ–æ–∫—É—Å–µ —ç–∫—Ä–∞–Ω–∞
2. –î–æ–±–∞–≤–∏—Ç—å pull-to-refresh –¥–ª—è —Ä—É—á–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
3. –í –±—É–¥—É—â–µ–º - –º–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ React Query –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏

## üìù –§–∞–π–ª—ã –¥–ª—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

1. ‚úÖ `HomeScreen.tsx` - –¥–æ–±–∞–≤–∏—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏ —Ñ–æ–∫—É—Å–µ
2. ‚úÖ `ObjectsListScreen.tsx` - —É–∂–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç useFocusEffect (–Ω–æ –º–æ–∂–Ω–æ —É–ª—É—á—à–∏—Ç—å)
3. ‚úÖ `ObjectsScreen.tsx` - —É–∂–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ–±–Ω–æ–≤–ª—è–µ—Ç –ø–æ—Å–ª–µ —É–¥–∞–ª–µ–Ω–∏—è
4. ‚ö†Ô∏è `ReportScreen.tsx` - –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∑–∞–≥—Ä—É–∑–∫—É (–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å getObjectById)
5. ‚ö†Ô∏è `CreateInspectionScreen.tsx` - –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∑–∞–≥—Ä—É–∑–∫—É

## üîç –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### –ò–∑–±—ã—Ç–æ—á–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö

–í `ReportScreen.tsx` –∏ `CreateInspectionScreen.tsx`:
```typescript
// ‚ùå –ü–õ–û–•–û: –ó–∞–≥—Ä—É–∂–∞–µ—Ç –í–°–ï –æ–±—ä–µ–∫—Ç—ã —Ç–æ–ª—å–∫–æ –¥–ª—è –ø–æ–∏—Å–∫–∞ –æ–¥–Ω–æ–≥–æ
const objects = await DataService.getObjects();
const foundObject = objects.find(obj => obj.id === objectId);

// ‚úÖ –•–û–†–û–®–û: –ó–∞–≥—Ä—É–∂–∞—Ç—å —Ç–æ–ª—å–∫–æ –Ω—É–∂–Ω—ã–π –æ–±—ä–µ–∫—Ç
const object = await ObjectService.getObjectById(objectId);
```

### –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —É–¥–∞–ª–µ–Ω–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤

–ù—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä—è—Ç—å, —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ª–∏ –æ–±—ä–µ–∫—Ç –ø–µ—Ä–µ–¥ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º:

```typescript
if (!object) {
  Alert.alert('–û—à–∏–±–∫–∞', '–û–±—ä–µ–∫—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω');
  navigation.goBack();
  return;
}
```

